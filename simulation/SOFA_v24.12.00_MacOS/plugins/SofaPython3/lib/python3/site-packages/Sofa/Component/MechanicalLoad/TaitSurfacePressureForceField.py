# -*- coding: utf-8 -*-


"""
Component TaitSurfacePressureForceField

.. autofunction:: TaitSurfacePressureForceField

Indices and tables
******************

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search`
"""
import Sofa
from Sofa.Core import Object, LinkPath
from Sofa.Component.TypeHints import Data, Optional, SofaArray
import dataclasses
    
class TaitSurfacePressureForceField(Object):
    """This component computes the volume enclosed by a surface mesh and apply a pressure force following Tait's equation: $P = P_0 - B((V/V_0)^\gamma - 1)$.
This ForceField can be used to apply :
 * a constant pressure (set $B=0$ and use $P_0$)
 * an ideal gas pressure (set $\gamma=1$ and use $B$)
 * a pressure from water (set $\gamma=7$ and use $B$)"""

    def __init__(self, template: Optional[str] = None, name: str,printLog: bool,tags: object,bbox: object,componentState: object,listening: bool,rayleighStiffness: float,p0: float,B: float,gamma: float,injectedVolume: float,maxInjectionRate: float,initialVolume: float,currentInjectedVolume: float,v0: float,currentVolume: float,currentPressure: float,currentStiffness: float,pressureTriangles: TypeHints.SofaArray,initialSurfaceArea: float,currentSurfaceArea: float,drawForceScale: float,drawForceColor: object,volumeAfterTC: float,surfaceAreaAfterTC: float):
        """This component computes the volume enclosed by a surface mesh and apply a pressure force following Tait's equation: $P = P_0 - B((V/V_0)^\gamma - 1)$.
This ForceField can be used to apply :
 * a constant pressure (set $B=0$ and use $P_0$)
 * an ideal gas pressure (set $\gamma=1$ and use $B$)
 * a pressure from water (set $\gamma=7$ and use $B$)
        
        Args:
           B (float):   IN: Bulk modulus (resistance to uniform compression)
           bbox (object):   this object bounding box
           componentState (object):   The state of the component among (Dirty, Valid, Undefined, Loading, Invalid).
           currentInjectedVolume (float):   OUT: Current injected (or extracted) volume (taking into account maxInjectionRate)
           currentPressure (float):   OUT: Current pressure, as computed from the last surface position
           currentStiffness (float):   OUT: dP/dV at current volume and pressure
           currentSurfaceArea (float):   OUT: Current surface area, as computed from the last surface position
           currentVolume (float):   OUT: Current volume, as computed from the last surface position
           drawForceColor (object):   DEBUG: color used to render force vectors
           drawForceScale (float):   DEBUG: scale used to render force vectors
           gamma (float):   IN: Bulk modulus (resistance to uniform compression)
           initialSurfaceArea (float):   OUT: Initial surface area, as computed from the surface rest position
           initialVolume (float):   OUT: Initial volume, as computed from the surface rest position
           injectedVolume (float):   IN: Injected (or extracted) volume since the start of the simulation
           listening (bool):   if true, handle the events, otherwise ignore the events
           maxInjectionRate (float):   IN: Maximum injection rate (volume per second)
           name (str):   object name
           p0 (float):   IN: Rest pressure when V = V0
           pressureTriangles (TypeHints.SofaArray):   OUT: list of triangles where a pressure is applied (mesh triangles + tessellated quads)
           printLog (bool):   if true, emits extra messages at runtime.
           rayleighStiffness (float):   Rayleigh damping - stiffness matrix coefficient
           surfaceAreaAfterTC (float):   OUT: Surface area after a topology change
           tags (object):   list of the subsets the object belongs to
           v0 (float):   OUT: Rest volume (as computed from initialVolume + injectedVolume)
           volumeAfterTC (float):   OUT: Volume after a topology change
           template (str): the type of degree of freedom
        """
        ...

    name: Data[str] 
    'object name'

    printLog: Data[bool] 
    'if true, emits extra messages at runtime.'

    tags: Data[object] 
    'list of the subsets the object belongs to'

    bbox: Data[object] 
    'this object bounding box'

    componentState: Data[object] 
    'The state of the component among (Dirty, Valid, Undefined, Loading, Invalid).'

    listening: Data[bool] 
    'if true, handle the events, otherwise ignore the events'

    rayleighStiffness: Data[float] 
    'Rayleigh damping - stiffness matrix coefficient'

    p0: Data[float] 
    'IN: Rest pressure when V = V0'

    B: Data[float] 
    'IN: Bulk modulus (resistance to uniform compression)'

    gamma: Data[float] 
    'IN: Bulk modulus (resistance to uniform compression)'

    injectedVolume: Data[float] 
    'IN: Injected (or extracted) volume since the start of the simulation'

    maxInjectionRate: Data[float] 
    'IN: Maximum injection rate (volume per second)'

    initialVolume: Data[float] 
    'OUT: Initial volume, as computed from the surface rest position'

    currentInjectedVolume: Data[float] 
    'OUT: Current injected (or extracted) volume (taking into account maxInjectionRate)'

    v0: Data[float] 
    'OUT: Rest volume (as computed from initialVolume + injectedVolume)'

    currentVolume: Data[float] 
    'OUT: Current volume, as computed from the last surface position'

    currentPressure: Data[float] 
    'OUT: Current pressure, as computed from the last surface position'

    currentStiffness: Data[float] 
    'OUT: dP/dV at current volume and pressure'

    pressureTriangles: Data[TypeHints.SofaArray] 
    'OUT: list of triangles where a pressure is applied (mesh triangles + tessellated quads)'

    initialSurfaceArea: Data[float] 
    'OUT: Initial surface area, as computed from the surface rest position'

    currentSurfaceArea: Data[float] 
    'OUT: Current surface area, as computed from the last surface position'

    drawForceScale: Data[float] 
    'DEBUG: scale used to render force vectors'

    drawForceColor: Data[object] 
    'DEBUG: color used to render force vectors'

    volumeAfterTC: Data[float] 
    'OUT: Volume after a topology change'

    surfaceAreaAfterTC: Data[float] 
    'OUT: Surface area after a topology change'



